<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Japanese Pronunciation Visualizer</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }

        .pronunciation-container {
            display: flex;
            gap: 20px;
            overflow-x: auto;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .word-container {
            min-width: 200px;
            padding: 10px;
            border-right: 1px solid #eee;
        }

        .word-container:last-child {
            border-right: none;
        }

        .word-original {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
        }

        .word-score {
            background: #f0f0f0;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 14px;
            margin-bottom: 10px;
            text-align: center;
        }

        .phonetic-container {
            width: 100%;
        }

        .phonetic-row {
            display: flex;
            gap: 5px;
            margin-bottom: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .header {
            margin-bottom: 5px;
            color: #666;
            font-size: 14px;
            text-align: center;
        }

        .phoneme, .syllable {
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 18px;
            position: relative;
        }

        .score-label {
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 10px;
            background: rgba(255,255,255,0.9);
            padding: 2px 4px;
            border-radius: 2px;
            white-space: nowrap;
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="pronunciation-container"></div>
    </div>

    <script>
        function getColorByScore(score) {
            if (score <= 50) {
                const r = 255;
                const g = Math.round((score * 2) * 2.55);
                return `rgb(${r}, ${g}, 0)`;
            } else {
                const r = Math.round((100 - score) * 2.55);
                const g = 255;
                return `rgb(${r}, ${g}, 0)`;
            }
        }

        // Демо-данные (можно заменить на реальные)
        const data = {'Id': 'd33750b6c1d24d01a0e03b98422ad819', 'RecognitionStatus': 'Success', 'Offset': 8700000, 'Duration': 34600000, 'Channel': 0, 'DisplayText': 'はじめまして、あんなです、どうぞよろしく。', 'SNR': 39.76213, 'NBest': [{'Confidence': 0.9217382, 'Lexical': 'はじめ まし て あんな です どうぞ よろしく', 'ITN': 'はじめ まし て あんな です どうぞ よろしく', 'MaskedITN': 'はじめまして、あんなです、どうぞよろしく', 'Display': 'はじめまして、あんなです、どうぞよろしく。', 'PronunciationAssessment': {'AccuracyScore': 88.0, 'FluencyScore': 99.0, 'CompletenessScore': 100.0, 'PronScore': 92.6}, 'Words': [{'Word': 'はじめ', 'Offset': 8700000, 'Duration': 5400000, 'PronunciationAssessment': {'AccuracyScore': 94.0, 'ErrorType': 'None'}, 'Syllables': [{'Syllable': 'は', 'PronunciationAssessment': {'AccuracyScore': 87.0}, 'Offset': 8700000, 'Duration': 2900000}, {'Syllable': 'じ', 'PronunciationAssessment': {'AccuracyScore': 100.0}, 'Offset': 11700000, 'Duration': 1800000}, {'Syllable': 'め', 'PronunciationAssessment': {'AccuracyScore': 46.0}, 'Offset': 13600000, 'Duration': 500000}], 'Phonemes': [{'Phoneme': 'h', 'PronunciationAssessment': {'AccuracyScore': 82.0}, 'Offset': 8700000, 'Duration': 2100000}, {'Phoneme': 'a', 'PronunciationAssessment': {'AccuracyScore': 100.0}, 'Offset': 10900000, 'Duration': 700000}, {'Phoneme': 'j', 'PronunciationAssessment': {'AccuracyScore': 100.0}, 'Offset': 11700000, 'Duration': 700000}, {'Phoneme': 'i', 'PronunciationAssessment': {'AccuracyScore': 100.0}, 'Offset': 12500000, 'Duration': 1000000}, {'Phoneme': 'm', 'PronunciationAssessment': {'AccuracyScore': 73.0}, 'Offset': 13600000, 'Duration': 200000}, {'Phoneme': 'e', 'PronunciationAssessment': {'AccuracyScore': 18.0}, 'Offset': 13900000, 'Duration': 200000}]}, {'Word': 'まし', 'Offset': 14200000, 'Duration': 2400000, 'PronunciationAssessment': {'AccuracyScore': 100.0, 'ErrorType': 'None'}, 'Syllables': [{'Syllable': 'ま', 'PronunciationAssessment': {'AccuracyScore': 100.0}, 'Offset': 14200000, 'Duration': 1200000}, {'Syllable': 'し', 'PronunciationAssessment': {'AccuracyScore': 100.0}, 'Offset': 15500000, 'Duration': 1100000}], 'Phonemes': [{'Phoneme': 'm', 'PronunciationAssessment': {'AccuracyScore': 100.0}, 'Offset': 14200000, 'Duration': 200000}, {'Phoneme': 'a', 'PronunciationAssessment': {'AccuracyScore': 100.0}, 'Offset': 14500000, 'Duration': 900000}, {'Phoneme': 's', 'PronunciationAssessment': {'AccuracyScore': 100.0}, 'Offset': 15500000, 'Duration': 400000}, {'Phoneme': 'h', 'PronunciationAssessment': {'AccuracyScore': 100.0}, 'Offset': 16000000, 'Duration': 600000}]}, {'Word': 'て', 'Offset': 16700000, 'Duration': 3700000, 'PronunciationAssessment': {'AccuracyScore': 98.0, 'ErrorType': 'None'}, 'Syllables': [{'Syllable': 'て', 'PronunciationAssessment': {'AccuracyScore': 75.0}, 'Offset': 16700000, 'Duration': 3700000}], 'Phonemes': [{'Phoneme': 't', 'PronunciationAssessment': {'AccuracyScore': 99.0}, 'Offset': 16700000, 'Duration': 500000}, {'Phoneme': 'e', 'PronunciationAssessment': {'AccuracyScore': 70.0}, 'Offset': 17300000, 'Duration': 3100000}]}, {'Word': 'あんな', 'Offset': 20700000, 'Duration': 4100000, 'PronunciationAssessment': {'AccuracyScore': 92.0, 'ErrorType': 'None'}, 'Syllables': [{'Syllable': 'あ', 'PronunciationAssessment': {'AccuracyScore': 90.0}, 'Offset': 20700000, 'Duration': 2100000}, {'Syllable': 'ん', 'PronunciationAssessment': {'AccuracyScore': 100.0}, 'Offset': 22900000, 'Duration': 700000}, {'Syllable': 'な', 'PronunciationAssessment': {'AccuracyScore': 100.0}, 'Offset': 23700000, 'Duration': 1100000}], 'Phonemes': [{'Phoneme': 'a', 'PronunciationAssessment': {'AccuracyScore': 77.0}, 'Offset': 20700000, 'Duration': 900000}, {'Phoneme': 'n', 'PronunciationAssessment': {'AccuracyScore': 100.0}, 'Offset': 21700000, 'Duration': 1100000}, {'Phoneme': 'n', 'PronunciationAssessment': {'AccuracyScore': 100.0}, 'Offset': 22900000, 'Duration': 700000}, {'Phoneme': 'a', 'PronunciationAssessment': {'AccuracyScore': 100.0}, 'Offset': 23700000, 'Duration': 300000}, {'Phoneme': '', 'PronunciationAssessment': {'AccuracyScore': 100.0}, 'Offset': 24100000, 'Duration': 700000}]}, {'Word': 'です', 'Offset': 24900000, 'Duration': 3700000, 'PronunciationAssessment': {'AccuracyScore': 96.0, 'ErrorType': 'None'}, 'Syllables': [{'Syllable': 'で', 'PronunciationAssessment': {'AccuracyScore': 95.0}, 'Offset': 24900000, 'Duration': 1600000}, {'Syllable': 'す', 'PronunciationAssessment': {'AccuracyScore': 78.0}, 'Offset': 26600000, 'Duration': 2000000}], 'Phonemes': [{'Phoneme': 'd', 'PronunciationAssessment': {'AccuracyScore': 100.0}, 'Offset': 24900000, 'Duration': 700000}, {'Phoneme': 'e', 'PronunciationAssessment': {'AccuracyScore': 90.0}, 'Offset': 25700000, 'Duration': 800000}, {'Phoneme': 's', 'PronunciationAssessment': {'AccuracyScore': 80.0}, 'Offset': 26600000, 'Duration': 1200000}, {'Phoneme': 'u', 'PronunciationAssessment': {'AccuracyScore': 74.0}, 'Offset': 27900000, 'Duration': 700000}]}, {'Word': 'どうぞ', 'Offset': 28900000, 'Duration': 5500000, 'PronunciationAssessment': {'AccuracyScore': 74.0, 'ErrorType': 'None'}, 'Syllables': [{'Syllable': 'ど', 'PronunciationAssessment': {'AccuracyScore': 85.0}, 'Offset': 28900000, 'Duration': 5500000}], 'Phonemes': [{'Phoneme': 'd', 'PronunciationAssessment': {'AccuracyScore': 62.0}, 'Offset': 28900000, 'Duration': 2100000}, {'Phoneme': 'o', 'PronunciationAssessment': {'AccuracyScore': 100.0}, 'Offset': 31100000, 'Duration': 1300000}, {'Phoneme': 'u', 'PronunciationAssessment': {'AccuracyScore': 100.0}, 'Offset': 32500000, 'Duration': 1100000}, {'Phoneme': 'z', 'PronunciationAssessment': {'AccuracyScore': 100.0}, 'Offset': 33700000, 'Duration': 700000}]}, {'Word': 'よろしく', 'Offset': 34500000, 'Duration': 8800000, 'PronunciationAssessment': {'AccuracyScore': 61.0, 'ErrorType': 'None'}, 'Syllables': [{'Syllable': 'よ', 'PronunciationAssessment': {'AccuracyScore': 100.0}, 'Offset': 34500000, 'Duration': 1800000}, {'Syllable': 'ろ', 'PronunciationAssessment': {'AccuracyScore': 100.0}, 'Offset': 36400000, 'Duration': 1600000}, {'Syllable': 'し', 'PronunciationAssessment': {'AccuracyScore': 100.0}, 'Offset': 38100000, 'Duration': 1300000}, {'Syllable': 'く', 'PronunciationAssessment': {'AccuracyScore': 61.0}, 'Offset': 39500000, 'Duration': 3800000}], 'Phonemes': [{'Phoneme': 'y', 'PronunciationAssessment': {'AccuracyScore': 100.0}, 'Offset': 34500000, 'Duration': 900000}, {'Phoneme': 'o', 'PronunciationAssessment': {'AccuracyScore': 100.0}, 'Offset': 35500000, 'Duration': 800000}, {'Phoneme': 'r', 'PronunciationAssessment': {'AccuracyScore': 100.0}, 'Offset': 36400000, 'Duration': 400000}, {'Phoneme': 'o', 'PronunciationAssessment': {'AccuracyScore': 100.0}, 'Offset': 36900000, 'Duration': 1100000}, {'Phoneme': 's', 'PronunciationAssessment': {'AccuracyScore': 100.0}, 'Offset': 38100000, 'Duration': 500000}, {'Phoneme': 'h', 'PronunciationAssessment': {'AccuracyScore': 100.0}, 'Offset': 38700000, 'Duration': 700000}, {'Phoneme': 'i', 'PronunciationAssessment': {'AccuracyScore': 100.0}, 'Offset': 39500000, 'Duration': 700000}, {'Phoneme': 'k', 'PronunciationAssessment': {'AccuracyScore': 51.0}, 'Offset': 40300000, 'Duration': 3000000}]}]}]}
;

        // Создаем HTML для каждого слова
function createWordHTML(wordData) {
            const wordScore = wordData.PronunciationAssessment.AccuracyScore;

            const syllablesHTML = wordData.Syllables.map(s => `
                <div class="syllable" style="background-color: ${getColorByScore(s.PronunciationAssessment.AccuracyScore)}">
                    ${s.Syllable}
                    <span class="score-label">${s.PronunciationAssessment.AccuracyScore}%</span>
                </div>
            `).join('');

            const phonemesHTML = wordData.Phonemes.map(p => `
                <div class="phoneme" style="background-color: ${getColorByScore(p.PronunciationAssessment.AccuracyScore)}">
                    ${p.Phoneme}
                    <span class="score-label">${p.PronunciationAssessment.AccuracyScore}%</span>
                </div>
            `).join('');

            return `
                <div class="word-container">
                    <div class="word-original">${wordData.Word}</div>
                    <div class="word-score">Точность: ${wordScore}%</div>
                    <div class="phonetic-container">
                        <div class="header">Слоги:</div>
                        <div class="phonetic-row">${syllablesHTML}</div>
                        <div class="header">Фонемы:</div>
                        <div class="phonetic-row">${phonemesHTML}</div>
                    </div>
                </div>
            `;
        }

        const container = document.querySelector('.pronunciation-container');
        data.NBest.forEach(nbest => {
            nbest.Words.forEach(word => {
                container.innerHTML += createWordHTML(word);
            });
        });
    </script>
</body>
</html>